function o(o){return o&&o.__esModule?o.default:o}function s(o,s,t,p){Object.defineProperty(o,s,{get:t,set:p,enumerable:!0,configurable:!0})}var t={};s(t,"start",(()=>ro));var p;function n(o,s){return{x:o||0,y:s||0}}p=function(o,s,t){document.addEventListener("keydown",(function(p){p.which==(t||27)&&(o(),console.log(s||"HALT IN THE NAME OF SCIENCE!"))}))};const e=(o,s)=>(o.x=s.x,o.y=s.y,o),c=(o,s,t)=>(o.x=s,o.y=t,o),i=(o,s,t)=>(o.x=s.x+t.x,o.y=s.y+t.y,o),a=(o,s,t)=>(o.x=s.x-t.x,o.y=s.y-t.y,o),l=(o,s)=>o.x*s.x+o.y*s.y,r=(o,s,t)=>(o.x=s.x*t,o.y=s.y*t,o),h=(o,s)=>{const t=o.x-s.x,p=o.y-s.y;return Math.sqrt(t*t+p*p)},d=o=>{const s=o.x,t=o.y;return Math.sqrt(s*s+t*t)},y=(o,s)=>{const t=s.x,p=s.y;let n=t*t+p*p;return n>0&&(n=1/Math.sqrt(n),o.x=s.x*n,o.y=s.y*n),o},u=(o,...s)=>{for(let t=0;t<s.length;t++){const p=s[t];i(p,p,o)}};const x=(o,s)=>{o.cpos.x+=o.acel.x*s*s*.001,o.cpos.y+=o.acel.y*s*s*.001,c(o.acel,0,0)},f={x:0,y:0},m={x:0,y:0},g={x:0,y:0},w={x:0,y:0},b=(o,s,t,p,n,e,l,r)=>{const h=((o,s)=>{const t=o.x-s.x,p=o.y-s.y;return t*t+p*p})(o.cpos,p.cpos),d=s+n;a(f,o.cpos,o.ppos),a(m,p.cpos,p.ppos),a(g,o.cpos,p.cpos);const y=Math.sqrt(h);let u=(y-d)/y;0===y&&(u=1);const x=t>0?t:1,b=e>0?e:1,v=x+b;if(w.x=g.x*u*(b/v),w.y=g.y*u*(b/v),t>0&&a(o.cpos,o.cpos,w),w.x=g.x*u*(x/v),w.y=g.y*u*(x/v),e>0&&i(p.cpos,p.cpos,w),!l)return;const M=(r=r||1)*(g.x*f.x+g.y*f.y)/(h||1),P=r*(g.x*m.x+g.y*m.y)/(h||1);f.x+=(P*g.x-M*g.x)/(x||1),m.x+=(M*g.x-P*g.x)/(b||1),f.y+=(P*g.y-M*g.y)/(x||1),m.y+=(M*g.y-P*g.y)/(b||1),t>0&&c(o.ppos,o.cpos.x-f.x,o.cpos.y-f.y),e>0&&c(p.ppos,p.cpos.x-m.x,p.cpos.y-m.y)},v=n(),M=n(),P=(n(),n()),k=(n(),n(),n());n(),n(),n(),n(),n();function S(o,s,t,p,c,d,u,x,f){a(M,d.cpos,p.cpos),y(v,M),a(P,o.cpos,p.cpos);const m=l(M,P),g=l(M,M),w=Math.sqrt(g);if(m<0||m>g)return;const S=m/g,C=1-S;r(k,v,S*w),i(k,k,p.cpos);if(h(k,o.cpos)>s)return;const A=C*t,E=S*t,I={cpos:n(),ppos:n()},T={cpos:n(),ppos:n()};r(I.cpos,v,S*w),a(I.cpos,o.cpos,I.cpos),r(I.ppos,v,S*w),a(I.ppos,o.ppos,I.ppos),r(T.cpos,v,C*w),i(T.cpos,o.cpos,T.cpos),r(T.ppos,v,C*w),i(T.ppos,o.ppos,T.ppos);const R={cpos:n(),ppos:n()},B={cpos:n(),ppos:n()};e(R.cpos,I.cpos),e(R.ppos,I.ppos),e(B.cpos,T.cpos),e(B.ppos,T.ppos);b(I,s,A,p,0,c,x,f),b(T,s,E,d,0,u,x,f);const q={cpos:n(),ppos:n()},F={cpos:n(),ppos:n()};a(q.cpos,I.cpos,R.cpos),a(F.cpos,T.cpos,B.cpos),r(q.cpos,q.cpos,C),r(F.cpos,F.cpos,S),i(o.cpos,o.cpos,q.cpos),i(o.cpos,o.cpos,F.cpos),x&&(a(q.ppos,I.ppos,R.ppos),a(F.ppos,T.ppos,B.ppos),r(q.ppos,q.ppos,C),r(F.ppos,F.ppos,S),i(o.ppos,o.ppos,q.ppos),i(o.ppos,o.ppos,F.ppos))}const C=n(),A=n(),E=n(),I=n(),T=n(),R=n(),B=n(),q=n(),F=n(),L=n(),N=n(),j=n(),O=n(),$=n(),D=(o,s,t,p,h,u,x,f,m,g,w,b,v,M,P)=>{c(C,0,0),c(A,0,0),c(E,0,0),c(I,0,0),c(T,0,0),c(R,0,0),c(B,0,0),c(q,0,0),c(F,0,0),c(L,0,0),c(N,0,0),c(j,0,0),c(O,0,0),c($,0,0),!v||0===v.x&&0===v.y?(a(C,o,x),y(C,C)):c(C,v.x,v.y),r(A,C,-1);const k=t+m,S=1+(p>g?p:g);a(E,o,s);const D=l(C,E);r(I,C,D),a(T,E,I),a(R,x,f);const V=l(A,R);r(B,A,V),a(q,R,B),r(N,I,(t-m)/k),r(j,B,S*m/k),i(F,N,j),i(F,F,T),r(O,I,S*t/k),r($,B,(m-t)/k),i(L,O,$),i(L,L,q);const _=i(n(),F,L),H=n();r(H,C,l(_,C));const U=a(n(),_,H);y(U,U);let G=-l(_,U);G/=1/(t+m);const X=Math.abs(G);if(X>1e-4){const o=d(T),s=d(q),t=n(),p=n();r(t,U,X<o*h?h:-o*u),r(p,U,X<s*w?w:-s*b),i(F,F,t),i(L,L,p)}e(M,F),e(P,L)};function V(o,s,t,p,e,c=1,l=!0){const h=1/((s>0?s:1)||1),y=1/((p>0?p:1)||1),u=h+y,x=a(n(),t.cpos,o.cpos),f=d(x);if(0===f)return;r(x,x,(f-e)/f/u);const m=r(n(),x,h*c),g=r(n(),x,y*c);s>0?(i(o.cpos,o.cpos,m),l||i(o.ppos,o.ppos,m)):p>0&&(a(t.cpos,t.cpos,m),l||a(t.ppos,t.ppos,m)),p>0?(a(t.cpos,t.cpos,g),l||a(t.ppos,t.ppos,g)):s>0&&(i(o.cpos,o.cpos,g),l||i(o.ppos,o.ppos,g))}const _=n();function H(o,s,t,p,n=.99){if(s<=0||p<=0)return;let e,a;const l=t.cpos.x-o.cpos.x,h=t.cpos.y-o.cpos.y;c(_,l,h),e=d(_),e=0===e?1:e,a=n*(s*p/(e*e)),y(_,_),r(_,_,a),i(o.acel,o.acel,_)}const U=o=>{const s=2*o.cpos.x-o.ppos.x,t=2*o.cpos.y-o.ppos.y;c(o.ppos,o.cpos.x,o.cpos.y),c(o.cpos,s,t)},G=(o,s,t,p,n,e,i,a,l)=>{const r=n-o,h=i/2+t/2-Math.abs(r),d=e-s,y=a/2+p/2-Math.abs(d);if(h<=0)return null;if(y<=0)return null;if(c(l.resolve,0,0),c(l.hitPos,0,0),c(l.normal,0,0),h<y){const s=r<0?-1:1;l.resolve.x=h*s,l.normal.x=s,l.hitPos.x=o+t/2*s,l.hitPos.y=e}else{const o=d<0?-1:1;l.resolve.y=y*o,l.normal.y=o,l.hitPos.x=n,l.hitPos.y=s+p/2*o}return l},X=(o,s,t,p,n,e)=>{const c=p-o,i=n-s,a=t+e;return c*c+i*i<a*a},Z=n(),z=n();function J(o,s,t,p,n){a(Z,s,o),a(z,p,t);const e=(-Z.y*(o.x-t.x)+Z.x*(o.y-t.y))/(-z.x*Z.y+Z.x*z.y),c=(z.x*(o.y-t.y)-z.y*(o.x-t.x))/(-z.x*Z.y+Z.x*z.y);return e>=0&&e<=1&&c>=0&&c<=1&&(n.x=o.x+c*Z.x,n.y=o.y+c*Z.y,!0)}const K=n(),Q=n(),W=n(),Y=n(),oo=n(),so=n();function to(o,s,t,p){a(W,o.cpos,o.ppos),y(Y,W),r(oo,Y,s),i(so,oo,o.cpos);return!!J(so,o.ppos,t,p,K)&&(a(Q,so,K),a(o.cpos,o.cpos,Q),a(o.ppos,o.ppos,Q),!0)}function po(){return{distance:0,similarity:0,u:0,projectedPoint:n(),edgeNormal:n()}}const no=n(),eo=n();function co(o,s,t,p){if(a(no,t,s),0===no.x&&0===no.y)throw new Error("ZeroLengthEdge");const n=((o.x-s.x)*no.x+(o.y-s.y)*no.y)/(no.x*no.x+no.y*no.y);p.u=n;const e=c(p.projectedPoint,s.x+n*no.x,s.y+n*no.y);p.distance=h(e,o);const i=(r=p.edgeNormal,d=s,u=t,r.y=u.x-d.x,r.x=d.y-u.y,y(r,r));var r,d,u;a(eo,o,e),p.similarity=l(i,eo)}const io=n(),ao=n(),lo=n(),ro=()=>{const s=document.createElement("canvas"),t=s.getContext("2d");s.width=s.height=800,s.style.border="1px solid gray",document.body.appendChild(s);const e={cpos:n(350,90),ppos:n(349,80),acel:n(),w:100,h:150,mass:10},c={cpos:n(350,600),ppos:n(350,600),acel:n(),w:100,h:150,mass:10},l=[],h={resolve:n(),hitPos:n(),normal:n()};l.push(e,c);let d=!0;function y(o,s){s.clearRect(0,0,s.canvas.width,s.canvas.height);for(let t=0;t<o.length;t++){const p=o[t];s.fillStyle="red",s.fillRect(p.ppos.x-p.w/2,p.ppos.y-p.h/2,p.w,p.h),s.fillStyle="black",s.fillRect(p.cpos.x-p.w/2,p.cpos.y-p.h/2,p.w,p.h)}}o(p)((()=>d=!1)),function o(){for(let o=0;o<l.length;o++){const s=l[o];x(s,1)}if(G(e.cpos.x,e.cpos.y,e.w,e.h,c.cpos.x,c.cpos.y,c.w,c.h,h)){y(l,t);const o=r(n(),h.resolve,.5);i(c.cpos,c.cpos,o),i(c.ppos,c.ppos,o),a(e.cpos,e.cpos,o),a(e.ppos,e.ppos,o),y(l,t);const s=n(),p=n(),d=1,u=.9,x=.01;D(e.cpos,e.ppos,e.mass,d,u,x,c.cpos,c.ppos,c.mass,d,u,x,n(),s,p),a(e.ppos,e.cpos,s),a(c.ppos,c.cpos,p),y(l,t)}for(let o=0;o<l.length;o++){const s=l[o];U(s)}y(l,t),d&&window.requestAnimationFrame(o)}()};var ho={};s(ho,"start",(()=>yo));const yo=()=>{const s=document.createElement("canvas"),t=s.getContext("2d");s.width=s.height=800,s.style.border="1px solid gray",document.body.appendChild(s);const e=[];for(let o=25,t=0;t<o;t++){const o=s.width/2,p=s.height/2,n=.5*Math.min(o,p),c=o+Math.cos(t)*n,i=p+Math.sin(t)*n;e.push(d(c,i))}const c={cpos:n(s.width/2,s.height/2),ppos:n(s.width/2,s.height/2),acel:n(),mass:1e5};let l=!0;function d(o,s){return{id:"id-"+Math.floor(1e7*Math.random()),cpos:n(o,s),ppos:n(o,s),acel:n(),mass:10,w:10,h:10}}function y(o,s){s.clearRect(0,0,s.canvas.width,s.canvas.height);for(let t=0;t<o.length;t++){const p=o[t];s.fillStyle="red",s.fillRect(p.ppos.x-p.w/2,p.ppos.y-p.h/2,p.w,p.h),s.fillStyle="black",s.fillRect(p.cpos.x-p.w/2,p.cpos.y-p.h/2,p.w,p.h)}}o(p)((()=>l=!1)),function o(){for(let o=0;o<e.length;o++){const s=e[o];h(s.cpos,c.cpos)>100&&H(s,s.mass,c,c.mass)}for(let o=0;o<e.length;o++){const s=e[o];x(s,1)}const s=[],p={resolve:n(),hitPos:n(),normal:n()};for(let o=0;o<e.length;o++)for(let c=o+1;c<e.length;c++){const l=e[o],h=e[c];if(G(l.cpos.x,l.cpos.y,l.w,l.h,h.cpos.x,h.cpos.y,h.w,h.h,p)&&-1===s.indexOf(l.id+","+h.id)&&-1===s.indexOf(h.id+","+l.id)){const o=r(n(),p.resolve,.5);i(h.cpos,h.cpos,o),i(h.ppos,h.ppos,o),a(l.cpos,l.cpos,o),a(l.ppos,l.ppos,o),y(e,t);const c=n(),d=n(),u=1,x=.9,f=.01;D(l.cpos,l.ppos,l.mass,u,x,f,h.cpos,h.ppos,h.mass,u,x,f,n(),c,d),a(l.ppos,l.cpos,c),a(h.ppos,h.cpos,d),y(e,t),s.push(l.id+","+h.id),s.push(h.id+","+l.id)}}for(let o=0;o<e.length;o++){const s=e[o];U(s)}y(e,t),l&&window.requestAnimationFrame(o)}()};var uo={};s(uo,"start",(()=>xo));const xo=()=>{const s=document.createElement("canvas"),t=s.getContext("2d");s.width=s.height=800,s.style.border="1px solid gray",document.body.appendChild(s);const c={x:400,y:400},i={cpos:e(n(),c),ppos:e(n(),c),acel:n(),radius:20,mass:1e4},a=function(o,s,t){const p=[];for(let n=0;n<t;n++){const t=Math.cos(n)*o.x+o.x,e=Math.sin(n)*o.y+o.y;p.push({cpos:{x:t,y:e},ppos:{x:t,y:e},acel:{x:0,y:0},radius:Math.max(Math.abs(Math.cos(n)+Math.sin(n))*s,10),mass:Math.max(1*Math.abs(Math.cos(n)+Math.sin(n)),1)})}return p}(c,15,40),l=[];a.unshift(i);let r=!0;o(p)((()=>r=!1));let h=0;!function o(){n();for(let o=0;o<a.length;o++){const s=a[o];s!==i&&h<100&&H(s,s.mass,i,i.mass),x(s,16)}!function(o,s){o.length=0;for(let t=0;t<s.length;t++){const p=s[t];for(let n=t+1;n<s.length;n++){const t=s[n];X(p.cpos.x,p.cpos.y,p.radius,t.cpos.x,t.cpos.y,t.radius)&&o.push(p,t)}}}(l,a);for(let o=0;o<l.length;o+=2){const s=l[o],t=l[o+1];b(s,s.radius,s.mass,t,t.radius,t.mass,!1,.1)}for(let o=0;o<a.length;o++){const s=a[o];U(s)}for(let o=0;o<l.length;o+=2){const s=l[o],t=l[o+1];b(s,s.radius,s.mass,t,t.radius,t.mass,!0,.1)}!function(o,s){s.clearRect(0,0,s.canvas.width,s.canvas.height);for(let t=0;t<o.length;t++){const p=o[t];s.fillStyle="red",s.beginPath(),s.arc(p.ppos.x,p.ppos.y,p.radius,0,2*Math.PI,!1),s.fill(),s.fillStyle="black",s.beginPath(),s.arc(p.cpos.x,p.cpos.y,p.radius,0,2*Math.PI,!1),s.fill()}}(a,t),h++,r&&window.requestAnimationFrame(o)}()};var fo={};s(fo,"start",(()=>mo));const mo=()=>{const s=document.createElement("canvas"),t=s.getContext("2d");s.width=s.height=800,s.style.border="1px solid gray",document.body.appendChild(s);const c=[],i=[],a=[],l=function(o,s,t,p){const c=[],i=[],a=[],l=[n(o,s),n(o+t,s),n(o+t,s+p),n(o,s+p)];for(let o=0;o<l.length;o++){const s=l[o],t=0===i.length?null:i[o-1],p={cpos:e(n(),s),ppos:e(n(),s),acel:n(0,0),mass:0===o?-1:1,radius:1};t&&(c.push({point1:t,point2:p}),a.push({point1:t,point2:p,goal:h(s,t.cpos)})),i.push(p)}return c.push({point1:i[i.length-1],point2:i[0]}),a.push({point1:i[i.length-1],point2:i[0],goal:h(i[i.length-1].cpos,i[0].cpos)}),a.push({point1:i[0],point2:i[2],goal:h(i[0].cpos,i[2].cpos)}),{lines:c,circles:i,constraints:a}}(300,200,100,200);c.push(...l.circles),i.push(...l.lines),a.push(...l.constraints),c.push({cpos:n(500,390),ppos:n(510,390),acel:n(0,0),mass:100,radius:10});let r=!0;function d(o,s,t=.9){for(let p=0;p<o.length;p++){const n=o[p];for(let e=p+1;e<o.length;e++){const p=o[e];X(n.cpos.x,n.cpos.y,n.radius,p.cpos.x,p.cpos.y,p.radius)&&b(n,n.radius,n.mass,p,p.radius,p.mass,s,t)}}}function y(o,s,t,p=.9){for(let n=0;n<o.length;n++){const e=o[n];for(let o=0;o<s.length;o++){const n=s[o];e.point1!=n&&e.point2!==n&&(t||to(n,n.radius,e.point1.cpos,e.point2.cpos),S(n,n.radius,n.mass,e.point1,e.point1.mass,e.point2,e.point2.mass,t,p))}}}o(p)((()=>r=!1)),function o(){for(let o=0;o<c.length;o++){const s=c[o];x(s,16)}for(let o=0;o<2;o++)for(let o=0;o<a.length;o++){const s=a[o];V(s.point1,s.point1.mass,s.point2,s.point2.mass,s.goal)}d(c,!1),y(i,c,!1);for(let o=0;o<c.length;o++){const s=c[o];U(s)}d(c,!0),y(i,c,!0),function(o,s,t){t.clearRect(0,0,t.canvas.width,t.canvas.height);for(let s=0;s<o.length;s++){const p=o[s];t.fillStyle="red",t.beginPath(),t.arc(p.ppos.x,p.ppos.y,p.radius,0,2*Math.PI,!1),t.fill(),t.fillStyle="black",t.beginPath(),t.arc(p.cpos.x,p.cpos.y,p.radius,0,2*Math.PI,!1),t.fill()}for(let o=0;o<s.length;o++){const p=s[o];t.strokeStyle="red",t.beginPath(),t.moveTo(p.point1.ppos.x,p.point1.ppos.y),t.lineTo(p.point2.ppos.x,p.point2.ppos.y),t.stroke(),t.beginPath(),t.strokeStyle="black",t.moveTo(p.point1.cpos.x,p.point1.cpos.y),t.lineTo(p.point2.cpos.x,p.point2.cpos.y),t.stroke()}}(c,i,t),r&&window.requestAnimationFrame(o)}()};var go={};s(go,"start",(()=>wo));const wo=()=>{const s=document.createElement("canvas"),t=s.getContext("2d");s.tabIndex=1,s.width=s.height=800,s.style.border="1px solid gray",document.body.appendChild(s);const e={cpos:n(600,0),ppos:n(600,0),acel:n(0,0),mass:1,radius:20},c={point1:{cpos:n(100,300),ppos:n(100,300),acel:n(0,0),mass:-1,radius:0},point2:{cpos:n(700,300),ppos:n(700,300),acel:n(0,0),mass:-1,radius:0},goal:500},a=[e,c.point1,c.point2];n();let l=!0;o(p)((()=>l=!1)),function o(){i(e.acel,e.acel,n(0,.8));for(let o=0;o<a.length;o++){x(a[o],16)}to(e,e.radius,c.point1.cpos,c.point2.cpos),S(e,e.radius,e.mass,c.point1,c.point1.mass,c.point2,c.point2.mass,!1,.9);for(let o=0;o<a.length;o++){U(a[o])}S(e,e.radius,e.mass,c.point1,c.point1.mass,c.point2,c.point2.mass,!0,.9);for(let o=0;o<5;o++)V(c.point1,c.point1.mass,c.point2,c.point2.mass,c.goal);!function(o,s,t){t.clearRect(0,0,t.canvas.width,t.canvas.height);for(let s=0;s<o.length;s++){const p=o[s];t.fillStyle="red",t.beginPath(),t.arc(p.ppos.x,p.ppos.y,p.radius,0,2*Math.PI,!1),t.fill(),t.fillStyle="black",t.beginPath(),t.arc(p.cpos.x,p.cpos.y,p.radius,0,2*Math.PI,!1),t.fill()}for(let o=0;o<s.length;o++){const p=s[o];t.strokeStyle="red",t.beginPath(),t.moveTo(p.point1.ppos.x,p.point1.ppos.y),t.lineTo(p.point2.ppos.x,p.point2.ppos.y),t.stroke(),t.beginPath(),t.strokeStyle="black",t.moveTo(p.point1.cpos.x,p.point1.cpos.y),t.lineTo(p.point2.cpos.x,p.point2.cpos.y),t.stroke()}}(a,[c],t),l&&window.requestAnimationFrame(o)}()};var bo={};s(bo,"start",(()=>vo));const vo=()=>{const s=document.createElement("canvas"),t=s.getContext("2d");s.tabIndex=1,s.width=s.height=800,s.style.border="1px solid gray",document.body.appendChild(s);const e={cpos:n(400,0),ppos:n(400,0),acel:n(0,0),width:50,height:75,mass:1},c={cpos:n(400,700),ppos:n(400,700),acel:n(0,0),width:800,height:100,mass:Number.MAX_SAFE_INTEGER-1e5},l=[e,c],h={resolve:n(),hitPos:n(),normal:n()};let d=!0;o(p)((()=>d=!1));const y={};function f(o,s){s.clearRect(0,0,s.canvas.width,s.canvas.height);for(let t=0;t<o.length;t++){const p=o[t];s.fillStyle="red",s.fillRect(p.ppos.x-p.width/2,p.ppos.y-p.height/2,p.width,p.height),s.fillStyle="black",s.fillRect(p.cpos.x-p.width/2,p.cpos.y-p.height/2,p.width,p.height)}}s.addEventListener("keydown",(o=>{y[o.key]=!0,o.preventDefault()})),document.body.addEventListener("keyup",(o=>{y[o.key]=!1,o.preventDefault()})),function o(){i(e.acel,e.acel,n(0,9.8));for(let o=0;o<l.length;o++){x(l[o],16)}const s=G(e.cpos.x,e.cpos.y,e.width,e.height,c.cpos.x,c.cpos.y,c.width,c.height,h);if(s){const o=r(n(),h.resolve,-1);u(o,e.cpos,e.ppos),f(l,t);const s=n(),p=n(),i=1,d=.9,y=.1;D(e.cpos,e.ppos,e.mass,i,d,y,c.cpos,c.ppos,c.mass,i,d,y,h.normal,s,p),a(e.ppos,e.cpos,s),e.ppos.y=e.cpos.y,f(l,t)}y.ArrowLeft&&i(e.acel,e.acel,n(s?-5:-.5,0)),y.ArrowRight&&i(e.acel,e.acel,n(s?5:.5,0)),s&&y.ArrowUp&&e.cpos.y-e.ppos.y==0&&i(e.acel,e.acel,n(0,-98));for(let o=0;o<l.length;o++){U(l[o])}f(l,t),d&&window.requestAnimationFrame(o)}()};var Mo={};s(Mo,"start",(()=>Po));const Po=()=>{const s=800,t=document.createElement("canvas"),c=t.getContext("2d");t.tabIndex=1,t.width=t.height=s,t.style.border="1px solid gray",document.body.appendChild(t);const l=[],r=[],d=[],y=m([n(50,50),n(750,50),n(750,750),n(50,750)]),u=m([n(500,400),n(300,600)]);u.pop(),l.push(...y,...u),d.push(...function(o,s,t,p){const n=[];for(let e=0;e<p;e++){const p=o.x+Math.cos(e)*s,c=o.y+Math.sin(e)*s;n.push({cpos:{x:p,y:c},ppos:{x:p,y:c},acel:{x:0,y:0},radius:Math.max(Math.abs(Math.cos(e)+Math.sin(e))*t,10),mass:Math.max(1*Math.abs(Math.cos(e)+Math.sin(e)),1)})}return n}(n(400,400),200,10,400));[g(6,n(300,100),15),g(3,n(400,100),15),g(4,n(600,100),15)].forEach((o=>{d.push(...o.circles),r.push(...o.constraints),l.push(...o.lines)}));let f=!0;function m(o){const s=[],t=[];for(let p=0;p<o.length;p++){const c=o[p],i=0===t.length?null:t[p-1],a={cpos:e(n(),c),ppos:e(n(),c),acel:n(0,0),mass:-1,radius:1};if(i){const o={point1:i,point2:a};s.push(o)}t.push(a)}return s.push({point1:t[t.length-1],point2:t[0]}),s}function g(o,s,t){const p=[],n=[],e=[];for(let p=0;p<o;p++){const e=s.x+Math.cos(p/o*Math.PI*2)*t,c=s.y+Math.sin(p/o*Math.PI*2)*t;n.push({cpos:{x:e,y:c},ppos:{x:e,y:c},acel:{x:0,y:0},radius:5,mass:5})}for(let o=0;o<n.length;o++){const s=n[o],t=o===n.length-1?n[0]:n[o+1];p.push({point1:s,point2:t})}for(let o=0;o<n.length;o++){const s=n[o];let t=o;for(;;){t++;const o=n[t%n.length];if(o===s)break;if(void 0!==e.find((t=>t.point1===s&&t.point2===o||t.point2===s&&t.point1===o)))break;e.push({point1:s,point2:o,goal:h(s.cpos,o.cpos)})}}return{circles:n,lines:p,constraints:e}}o(p)((()=>f=!1)),function o(){for(let o=0;o<d.length;o++){const s=d[o];s.mass>0&&i(s.acel,s.acel,n(0,.8)),x(s,16)}for(let o=0;o<5;o++)for(let o=0;o<r.length;o++){const s=r[o];V(s.point1,s.point1.mass,s.point2,s.point2.mass,s.goal,1)}for(let o=0;o<l.length;o++){const s=l[o],t=y.indexOf(s)>-1;for(let o=0;o<d.length;o++){const p=d[o];p!==s.point1&&p!==s.point2&&(t||to(p,p.radius,s.point1.cpos,s.point2.cpos),S(p,p.radius,p.mass,s.point1,s.point1.mass,s.point2,s.point2.mass,!1,.9))}}for(let o=0;o<d.length;o++){const s=d[o];for(let t=o+1;t<d.length;t++){const o=d[t];X(s.cpos.x,s.cpos.y,s.radius,o.cpos.x,o.cpos.y,o.radius)&&b(s,s.radius,s.mass,o,o.radius,o.mass,!1,.9)}}for(let o=0;o<d.length;o++){const s=d[o];U(s)}for(let o=0;o<l.length;o++){const s=l[o];for(let o=0;o<d.length;o++){const t=d[o];t!==s.point1&&t!==s.point2&&S(t,t.radius,t.mass,s.point1,s.point1.mass,s.point2,s.point2.mass,!0,.9)}}for(let o=0;o<d.length;o++){const s=d[o];for(let t=o+1;t<d.length;t++){const o=d[t];X(s.cpos.x,s.cpos.y,s.radius,o.cpos.x,o.cpos.y,o.radius)&&b(s,s.radius,s.mass,o,o.radius,o.mass,!0,.9)}}for(let o=0;o<y.length;o++){const s=y[o];if(s!==u[0])for(let o=0;o<d.length;o++){const t=d[o],p=po();if(co(t.cpos,s.point1.cpos,s.point2.cpos,p),p.similarity>0)continue;const e=n();a(e,p.projectedPoint,t.cpos),i(t.cpos,t.cpos,e)}}!function(o,s,t,p){p.clearRect(0,0,p.canvas.width,p.canvas.height);for(let s=0;s<o.length;s++){const t=o[s];p.fillStyle="red",p.beginPath(),p.arc(t.ppos.x,t.ppos.y,t.radius,0,2*Math.PI,!1),p.fill(),p.fillStyle="black",p.beginPath(),p.arc(t.cpos.x,t.cpos.y,t.radius,0,2*Math.PI,!1),p.fill()}for(let o=0;o<s.length;o++){const t=s[o];p.strokeStyle="red",p.beginPath(),p.moveTo(t.point1.ppos.x,t.point1.ppos.y),p.lineTo(t.point2.ppos.x,t.point2.ppos.y),p.stroke(),p.beginPath(),p.strokeStyle="black",p.moveTo(t.point1.cpos.x,t.point1.cpos.y),p.lineTo(t.point2.cpos.x,t.point2.cpos.y),p.stroke()}for(let o=0;o<t.length;o++){const s=t[o];p.strokeStyle="magenta",p.beginPath(),p.moveTo(s.point1.ppos.x,s.point1.ppos.y),p.lineTo(s.point2.ppos.x,s.point2.ppos.y),p.stroke(),p.beginPath(),p.strokeStyle="purple",p.moveTo(s.point1.cpos.x,s.point1.cpos.y),p.lineTo(s.point2.cpos.x,s.point2.cpos.y),p.stroke()}}(d,l,r,c),f&&window.requestAnimationFrame(o)}()};var ko={};s(ko,"start",(()=>So));const So=()=>{const s=document.createElement("canvas"),t=s.getContext("2d");s.tabIndex=1,s.width=s.height=800,s.style.border="1px solid gray",document.body.appendChild(s);const e={cpos:n(600,100),ppos:n(600,100),acel:n(0,0),mass:1,radius:20},c={point1:{cpos:n(100,300),ppos:n(100,300),acel:n(0,0),mass:1,radius:0},point2:{cpos:n(700,300),ppos:n(700,300),acel:n(0,0),mass:1,radius:0},goal:500},l=[e,c.point1,c.point2];let h=!0;o(p)((()=>h=!1)),function o(){i(e.acel,e.acel,n(0,.98));for(let o=0;o<l.length;o++){x(l[o],16)}const s=po();co(e.ppos,c.point1.cpos,c.point2.cpos,s);const p=n(),d=(f=n(),g=e.radius,a(io,(m=e).cpos,m.ppos),y(ao,io),r(lo,ao,g),i(f,lo,m.cpos),f);var f,m,g;if(J(e.ppos,d,c.point1.cpos,c.point2.cpos,p)&&s.similarity<0){const o=n();a(o,p,d),u(o,e.cpos,e.ppos);const t=n(),l=n(),r=1;D(e.cpos,e.ppos,e.mass,r,.9,.1,s.projectedPoint,s.projectedPoint,(c.point1.mass+c.point2.mass)*s.u,r,.9,.1,s.edgeNormal,t,l),a(e.ppos,e.cpos,t),i(e.ppos,e.ppos,l)}for(let o=0;o<l.length;o++){U(l[o])}for(let o=0;o<5;o++)V(c.point1,c.point1.mass,c.point2,c.point2.mass,c.goal);!function(o,s,t){t.clearRect(0,0,t.canvas.width,t.canvas.height);for(let s=0;s<o.length;s++){const p=o[s];t.fillStyle="red",t.beginPath(),t.arc(p.ppos.x,p.ppos.y,p.radius,0,2*Math.PI,!1),t.fill(),t.fillStyle="black",t.beginPath(),t.arc(p.cpos.x,p.cpos.y,p.radius,0,2*Math.PI,!1),t.fill()}for(let o=0;o<s.length;o++){const p=s[o];t.strokeStyle="red",t.beginPath(),t.moveTo(p.point1.ppos.x,p.point1.ppos.y),t.lineTo(p.point2.ppos.x,p.point2.ppos.y),t.stroke(),t.beginPath(),t.strokeStyle="black",t.moveTo(p.point1.cpos.x,p.point1.cpos.y),t.lineTo(p.point2.cpos.x,p.point2.cpos.y),t.stroke()}}(l,[c],t),h&&window.requestAnimationFrame(o)}()},Co=new URLSearchParams(window.location.search).get("demo"),Ao=new Map([["Bucket of Circles (Verlet)",Mo],["Circle Collisions (Verlet)",uo],["Circle to Box Collision (Verlet)",fo],["Single Edge Circle Collision (Verlet)",go],["Platformer (AABB Impulse Model)",bo],["AABB Overlap Demo (AABB Impulse Model)",t],["AABB Soup Demo (AABB Impulse Model)",ho],["Single Edge Circle Collision (AABB Impulse Model)",ko]]);if(Co&&Ao.has(Co))Ao.get(Co).start();else{const o=Array.from(Ao.keys()),s=o=>{const s=encodeURIComponent(o);return`\n      <li><a href="${`${window.location.pathname}?demo=${s}`}">${o}</a></li>\n    `},t=`\n    <ul>\n      ${o.map((o=>s(o))).join("\n")}\n    </ul>\n  `,p=document.createElement("div");p.innerHTML=t,document.body.appendChild(p)}
//# sourceMappingURL=index.e25e6626.js.map
